import{_ as i,c as s,o as a,aA as n}from"./chunks/framework.pa4oaAOh.js";const u=JSON.parse('{"title":"Build Options","description":"","frontmatter":{},"headers":[],"relativePath":"install_1.11.md","filePath":"install_1.11.md","lastUpdated":null}'),t={name:"install_1.11.md"};function o(l,e,d,h,p,r){return a(),s("div",null,e[0]||(e[0]=[n(`<h1 id="Build-Options" tabindex="-1">Build Options <a class="header-anchor" href="#Build-Options" aria-label="Permalink to &quot;Build Options {#Build-Options}&quot;">​</a></h1><p>To make customization of the build options easier we have the <code>CNPreferences.jl</code> package to generate the <code>LocalPreferences.toml</code> which is read by the build script to determine which build option to use. CNPreferences.jl will also enforce that Julia is restarted for changes to take effect. This module is not needed by the default build path or once your <code>LocalPreferences.toml</code> is configured.</p><p><code>CNPreferences</code> is a separate module so that it can be used to configure the build settings before <code>cuNumeric.jl</code> is added to your environment. To install it separately run</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Pkg; Pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://github.com/ejmeitz/cuNumeric.jl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, subdir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lib/CNPreferences&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>You can also avoid installing <code>CNPreferences</code> and manually manage your <code>LocalPreferences.toml</code>. The file should look something like this:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[CNPreferences]</span></span>
<span class="line"><span>conda_jl_env = &quot;cupynumeric&quot;</span></span>
<span class="line"><span>mode = &quot;local_env&quot;</span></span>
<span class="line"><span>user_env = &quot;/home/emeitz/.conda/envs/cunumeric-gpu&quot;</span></span></code></pre></div><p>The mode can either be &quot;local_env&quot; or &quot;conda_jl&quot;. If <code>mode</code> is set to &quot;local_env&quot; then <code>user_env</code>must be the absolute path to your local conda environment (e.g., the value of CONDA_PREFIX when your environment is active) and<code>conda_jl_env</code>will be ignored. If<code>mode</code>is set to<code>conda_jl</code>then Conda.jl is used to create an environment with the name set by<code>conda_jl_env</code>. By default,<code>conda_jl_env</code> is cupynumeric.</p><h2 id="Default-Build-Conda.jl" tabindex="-1">Default Build (Conda.jl) <a class="header-anchor" href="#Default-Build-Conda.jl" aria-label="Permalink to &quot;Default Build (Conda.jl) {#Default-Build-Conda.jl}&quot;">​</a></h2><p>By default cuNumeric.jl will use <a href="https://github.com/JuliaPy/Conda.jl" target="_blank" rel="noreferrer">Conda.jl</a> to install cupynumeric inside of your <code>.julia</code> folder. This will create an environment called cupynumeric. To use this build option simply run:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Pkg.add(url = &quot;https://github.com/ejmeitz/cuNumeric.jl&quot;)</span></span></code></pre></div><p>If you previously used a custom build and would like to revert back to using Conda.jl run the following command in the directory containing the Project.toml of your environment. The &quot;Custom Builds&quot; section discusses the CNPreferences module in more detail.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">project </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;using CNPreferences; CNPreferences.use_conda_jl()&#39;</span></span></code></pre></div><h2 id="Link-Against-Existing-Conda-Environment" tabindex="-1">Link Against Existing Conda Environment <a class="header-anchor" href="#Link-Against-Existing-Conda-Environment" aria-label="Permalink to &quot;Link Against Existing Conda Environment {#Link-Against-Existing-Conda-Environment}&quot;">​</a></h2><p>To update <code>LocalPreferences.toml</code> so that a local conda environment is used as the binary provider for cupynumeric run the following command. <code>env_path</code> should be the absolute path to the conda environment (e.g., the value of CONDA_PREFIX when your environment is active). For me this path is: <code>/home/emeitz/.conda/envs/cunumeric-gpu</code>.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">project </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;using CNPreferences; CNPreferences.use_existing_conda_env(&quot;&lt;env-path&gt;&quot;)&#39;</span></span></code></pre></div><p>!!!note You might see the <code>conda_jl_env</code> key in your <code>LocalPreferences.toml</code> even if the mode is set to <code>local_env</code>. This is completely normal and is just a past setting that will be ignored.</p><p>A common reason to link against an existing environment is to avoid cupynumeric re-installing the entire CUDA toolkit. To make your own conda environment built off an existing CUDA install run the following with whatever version of CUDA is on the <code>LD_LIBRARY_PATH</code> in place of 12.2.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myenv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> activate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myenv</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CONDA_OVERRIDE_CUDA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;12.2&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> conda-forge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> legate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cupynumeric</span></span></code></pre></div><h3 id="BinaryBuilder" tabindex="-1">BinaryBuilder <a class="header-anchor" href="#BinaryBuilder" aria-label="Permalink to &quot;BinaryBuilder {#BinaryBuilder}&quot;">​</a></h3><p>This approach is not implemented yet. We hope to have this feature soon!</p>`,20)]))}const k=i(t,[["render",o]]);export{u as __pageData,k as default};
